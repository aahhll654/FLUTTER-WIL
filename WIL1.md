# Dart 언어

## 1. Dart 언어란

Dart는 구글이 개발한 프로그래밍 언어로, 웹에서 자바스크립트를 대체하려 하려는 목적으로 개발되었습니다.
그러나 결국, 자바스크립트를 대체하겠다는 목적에는 실패했지만, 모바일 및 웹 앱 개발 프레임워크인 Flutter의 언어로 채택되어 헌재 많은 주목을 받고 있다.

### 1.1 Dart 언어의 특징

다트 언어는 JIT(Just In Time) 컴파일 방식과 AOT(Ahead of Time) 컴파일 방식을 지원한다.  
소프트웨어를 효율적으로 개발하려면 코드의 변경된 사항을 화면에 반영해보고 수정하는 반복적인 과정이 빠른 사이클로 진행되어야 한다.
JIT 컴파일 방식은 다트 가상 머신에서 제공하는 기능으로, 실행 중에 코드를 컴파일하기 때문에 코드의 변경된 사항을 즉시 화면에 반영할 수 있는 핫 리로드(hot reload) 기능을 제공한다.  
개발하는 도중에는 하드웨어 리소스를 적게 사용하는 것보다 빠르게 개발할 수 있는 효율이 중요하기 때문에 JIT 컴파일 방식을 사용한다.  
하지만 소프트웨어를 배포할 때는 컴파일이 돼 있어야 더욱 리소스를 효율적으로 사용할 수 있다. 그래서 배포 시에는 AOT 컴파일 방식을 사용해서 컴파일한다. AOT 방식은 런타임 이전에 컴파일을 실행하고, 가상머신을 사용하지 않고 기계어로 다트 언어가 직접 컴파일 되어서 매우 효율적으로 프로그램을 실행할 수 있다.

이 외에도 다트 언어는 아래와 같은 장점들을 가지고 있다.

1. 다트 언어는 UI를 제작하는 데 최적화되어 있다. 완전한 비동기 언어이며 이벤트 기반이다. 그리고 Isolate를 이용한 동시성 기능도 제공해준다.
2. Null Safety, Spread Operator, Collection if 등 효율적으로 UI를 코딩할 수 있는 기능을 제공해준다.
3. 멀티 플랫폼에서 로깅하고, 디버깅하고, 실행할 수 있다.
4. 자바스크립트로의 완전한 컴파일을 지원한다.
5. 백엔드 프로그래밍을 지원한다.

## 2. Dart 기초 문법

### 2.1 메인 함수

다트는 프로그램 시작점인 엔트리 함수 기호로 main()을 사용한다.  
다음과 같은 형식이다.

```dart
void main() {

}
```

### 2.2 주석

주석 기호로는 //와 /\* \*/와 ///를 사용한다.

```dart
void main() {
    // 한 줄 주석

    /*
    * 여러 줄 주석
    * 필수는 아니지만 관행상 줄의 시작으로 *를 사용한다.
    * */

    /// 슬래시 세 개를 사용하면 문서 주석을 작성할 수 있다.
    /// DartDoc이나 안드로이드 스튜디오 같은 IDE에서 문서로 인식한다.
}
```

### 2.3 print() 함수

print() 함수는 문자열을 콘솔에 출력하는 함수이다.

```dart
void main() {
    print('Hello World');
}
```

### 2.4 var를 사용한 변수 선언

변수는 var 변수명 = 값; 형식으로 선언하며 변수에 값이 들어가면 자동으로 타입을 추론하므로 명시적으로 타입을 선언하지 않아도 된다.
실제 코드가 컴파일될 때는 추론된 타입으로 var이 치환된다.

```dart
void main() {
    var name = '홍길동';

    // 변수값 변경 가능
    name = '고길동';

    // 변수명 중복은 불가능
    // var name = '또치' // 이와 같이 변수명이 중복될 경우 에러 발생
}
```

### 2.5 dynamic을 사용한 변수 선언

var 타입은 한 번 변수의 타입을 유추하게 되면 추론된 타입이 고정된다. 따라서 고정된 타입과 다른 변수 타입의 값을 다시 저장하려 하면 에러가 난다. 하지만 dynamic 키워드를 사용하면 변수의 타입이 고정되지 않는다.

```dart
void main() {
    dynamic name = '홍길동';
    name = 1; // 이와 같이 변수의 타입 변경이 가능하다.
}
```

### 2.6 final/const를 사용한 변수 선언

final과 const 키워드는 변수의 값을 처음 선언 후 변경할 수 없다.  
final과 const의 차이점은, final은 런타임, const는 빌드타임 상수라는 점이다. 즉, const 변수는 코드 실행 전에 값이 확정되어야 한다.

```dart
void main() {
    final String name = '홍길동';
    name = '고길동'; // 에러 발생, final 변수는 선언 후 값 변경 불가능

    const String name2 = '둘리';
    name2 = '도우너'; // 에러 발생, const 변수도 선언 후 값 변경 불가능

    // DateTime.now() 함수는 함수가 실행되는 순간의 날짜 및 시간을 제공해주는 함수. 즉, 실행을 해봐야 값이 확정된다.
    final DateTime now = DateTime.now(); // 성공

    const DateTime now = DateTime.now(); // 에러 발생
}
```

### 2.7 변수 타입

모든 변수는 고유의 변수 타입을 가지고 있다. var 키워드를 사용하면 자동으로 변수 타입을 유추할 수 있지만 변수 타입을 명시해주면 코드가 더욱 직관적이어서 유지보수가 편해진다.

```dart
void main() {
    String name = '홍길동';
    int isInt = 10;
    double isDouble = 2.5;
    bool isTrue = true;
}
```

### 2.8 컬렉션

컬렉션은 여러 값을 하나의 변수에 저장할 수 있는 타입이다.  
List, Map, Set과 같은 타입들이 존재한다.

1. List 타입  
   리스트 타입은 여러 값을 순서대로 한 변수에 저장할 때 사용된다.  
   리스트명[인덱스] 형식으로 특정 원소에 접근할 수 있고, 제일 첫 원소는 0으로 지정한다.

```dart
void main() {
    // 리스트에 넣을 타입을 <> 사이에 명시할 수 있다.
    List<String> newList = ['둘리', '또치', '도우너'];

    print(newList[1]); // '또치' 출력

    print(newList.length); // '3' 출력, length를 통해 리스트 길이를 가져올 수 있다.

    newList.add('희동이'); // add를 통해 리스트의 끝에 원소 추가 가능
}
```

2. Map 타입  
   Map 타입은 key와 value의 짝을 저장한다.  
   'Map<키의 타입, 값의 타입> 맵이름' 형식으로 생성한다.

```dart
void main() {
    Map<String, String> dictionary = {
        'Hong Gil Dong': '홍길동',
        'Ko Gil Dong': '고길동',
    };

    print(dictionary['Ko Gil Dong']); // '고길동' 이 출력된다.
}
```

3. Set 타입  
   세트는 중복 없는 값들의 집합이다. 'Set<타입> 세트이름' 형식으로 생성한다. 중복을 방지하므로 유일한 값들만 존재하는 걸 보장한다.

```dart
void main() {
    Set<String> newSet = {'둘리', '도우너', '또치', '또치'}; // 또치 중복

    print(newSet); // {둘리, 도우너, 또치} 가 출력된다. 즉, 중복을 허용하지 않는다.

    // newSet.contains('마이콜')을 통해 특정한 값이 있는지 확인할 수 있다. 이 경우에는 false가 반환된다.

    newSet.toList(); // toList()를 통해 List로 변경가능

    Set<String> newSet2 = {'둘리', '도우너'};
    Set.from(newSet2); // Set.from()을 통해 Set타입으로 변환가능
}
```

4. enum 타입  
   enum은 한 변수의 값을 몇 가지 옵션으로 제한하는 기능이다.  
   선택지가 제한적일 때 사용한다.

```dart
enum Status{
    approved,
    pending,
    rejected,
}

void main() {
    Status status = Status.approved;
    Status status2 = Status.pending;
    // 위와 같이 변수의 값을 몇 가지 옵션으로 제한한다.
}
```

### 2.9 연산자

연산자로는 수치 연산자, null값 입력 관련 연산자, 값 비교 연산자, 타입 비교 연산자, 논리 연산자가 있다.

1. 기본 수치 연산자 : +, -, \*, /, %, ...

2. null 관련 연산자 :  
   null은 아무 값도 없음을 뜻한다. 다트 언어에서는 변수 타입이 null 값을 가지는지 여부를 직접 지정해줘야 한다. 타입 뒤에 '?'를 추가해줘야 null값이 저장될 수 있다.

```dart
void main() {
    // 타입 뒤에 ?를 명시해서 null값을 가질수 있다.
    double? number1 = null;

    // 타입 뒤에 ?를 명시하지 않아 에러가 난다.
    double number2 = null;

    double? number3; // 자동으로 null값 지정
    number3 ??= 1; // ??를 사용하면 기존 값이 null일 때만 저장된다.
    number3 ??= 2; // 기존값이 null이 아니므로 1이 유지된다.
}
```

3. 값 비교 연산자 : >, <, ...

4. 타입 비교 연산자 : is 키워드를 사용하여 변수의 타입을 비교할 수 있다.

```dart
void main() {
    int num = 1;

    print(num is int); // true
    print(num is String); // false
}
```

5. 논리 연산자 : &&, || 등

### 2.10 제어문

제어문으로는 if문, switch문, for문, while문을 제공한다. C++과 유사하다.

다트 언어에서는 For...in 패턴의 for문도 제공해준다. 일반적으로 List의 모든 값을 순회하고 싶을 때 사용된다.

```dart
void main() {
    List<int> numList = [2,4,6,8];

    for (int number in numList) {
        print(number);
    }
    // numList의 모든 요소가 차례대로 출력된다.

}
```

### 2.11 함수

다트 언어에서 함수는 C++과 유사하지만 매개변수를 지정하는 방법에서 차이가 있다.  
다트 함수에서 매개변수를 지정하는 방법으로 순서가 고정된 매개변수(positional parameter)가 있고  
이름이 있는 매개변수(named parameter)가 있다.  
포지셔널 파라미터는 입력된 순서대로 매개변수에 값이 지정된다.  
네임드 파라미터는 순서와 상관없이 지정하고 싶은 매개변수의 이름을 이용해 값을 입력할 수 있다.  
네임드 파라미터를 지정하려면 중괄호 {}와 required 키워드를 사용해야 한다. 여기서 required 키워드는 매개변수가 null값이 불가능한 타입이면 기본값을 지정해주거나 필수로 입력해야 한다는 의미이다.  
포지셔널 파라미터에 기본값을 적용하려면 [] 기호를 사용하면 된다.  
네임드 파라미터에 기본값을 적용하려면 required를 생략해주고 기본값을 입력해주면 된다.

```dart
int func1(int a, int b, [int c = 3]) {
    return a + b + c;
}

int func2({
    required int a,
    required int b,
    int c = 3,
}) {
    return a + b + c;
}

// 포지셔널 파라미터와 네임드 파라미터를 섞어서 사용할 수도 있다.
// 섞어 쓸 때는 포지셔널 파라미터가 반드시 먼저 위치해야 한다.
int func3(
    int a, {
    required int b,
    int c = 3,
}) {
    return a + b + c;
}

void main() {
    func1(1, 2, 3); // 포지셔널
    func2(b:2, c:3, a:1); // 네임드
    func3(1, c:3, b:2); // 포지셔널 + 네임드
}
```

### 2.12 익명 함수와 람다 함수

익명 함수와 람다 함수는 둘 다 함수 이름이 없고 일회성으로 사용된다는 공통점이 있다.  
람다 함수는 익명 함수에서 {}를 빼고 => 기호를 추가한 것이다.  
익명 함수와 달리 코드 블록을 묶는 {}가 없는 람다는 함수 로직을 수행하는 스테이트먼트가 딱 하나이어야 한다.

```
익명 함수
(매개변수) {
    함수 바디
}


람다 함수
(매개변수) => 단 하나의 스테이트먼트
```
